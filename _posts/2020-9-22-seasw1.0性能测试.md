1. 测试报告参阅svn中的doc

# 测试范例
4core_2port

## 测试命令
4-2
./seasw_fe -c 0x155 -- -s ./cli/4core_2port.cli

## -c 0x155
代表程序调用的核心，使用逻辑CPU绝对序号与掩码的方式表示
`lscpu`
`cat /proc/cmdline`
其中声明占用的`FE核与main核`，在具体运行时都是调用1个main核（默认是0号核，该核不必进行cpu隔离），在本测试例中调用4个FE核

## --
用于分开DPDK程序标识符与seasw1.0程序标识符
前面的标识符由DPDK程序文档指定
后面的标识符由seasw1.0程序设计指定

## -s ./cli/4core_2port.cli
代表程序调用的配置文件，包含mempool、link、pipeline、pipeline加载的bin文件、pipeline运行启动的核信息
```
./cli/4core_2port.cli
PDX-License-Identifier: BSD-3-Clause

定义了mempool的名字、块大小、pool个数、缓存大小等信息，详见npdp的doc文件
mempool MEMPOOL0 buffer 2304 pool 512K cache 256 cpu 0

定义程序绑定的dpdk网卡，注意开启rss分流时rxq收包队列核txq发包队列个数要同步改变
link LINK0 dev 0000:3b:00.0 rxq 2 256 MEMPOOL0 txq 2 512 promiscuous on rss 0 1 
link LINK1 dev 0000:3b:00.1 rxq 2 256 MEMPOOL0 txq 2 512 promiscuous on rss 0 1


定义了程序的所有pipeline的信息、port in、port out、加载的bin文件
注意开启rss分流时，收包队列rxq核发包队列txq不同的pipeline要彼此错开
`原则：同一个网卡的同一个rxq或txq不能同时被两个pipeline绑定(或绑定之后不会产生流量冲突)，否则两个pipeline运行时便会打架`
最后定义了pipeline调用的bin文件，指导pipeline的运行规则。output0.bin从0口出，output1.bin从1口出
pipeline p0_0 period 5 offset_port_id 0 cpu 0 counter 20 iblock 1024
pipeline p0_0 port in bsz 32 link LINK0 rxq 0
pipeline p0_0 port out bsz 32 link LINK0 txq 0
pipeline p0_0 port out bsz 32 link LINK1 txq 0
pipeline p0_0 asm /home/majd/test_seasw1.0/bin/majd_5tuple_ipv6_4toutput0.bin

pipeline p0_1 period 5 offset_port_id 0 cpu 0 counter 20 iblock 1024
pipeline p0_1 port in bsz 32 link LINK0 rxq 1
pipeline p0_1 port out bsz 32 link LINK0 txq 1
pipeline p0_1 port out bsz 32 link LINK1 txq 1
pipeline p0_1 asm /home/majd/test_seasw1.0/bin/majd_5tuple_ipv6_4toutput0.bin

pipeline p1_0 period 5 offset_port_id 0 cpu 0 counter 20 iblock 1024
pipeline p1_0 port in bsz 32 link LINK1 rxq 0
pipeline p1_0 port out bsz 32 link LINK0 txq 0
pipeline p1_0 port out bsz 32 link LINK1 txq 0
pipeline p1_0 asm /home/majd/test_seasw1.0/bin/majd_5tuple_ipv6_4toutput1.bin

pipeline p1_1 period 5 offset_port_id 0 cpu 0 counter 20 iblock 1024
pipeline p1_1 port in bsz 32 link LINK1 rxq 1
pipeline p1_1 port out bsz 32 link LINK0 txq 1
pipeline p1_1 port out bsz 32 link LINK1 txq 1
pipeline p1_1 asm /home/majd/test_seasw1.0/bin/majd_5tuple_ipv6_4toutput1.bin

指导pipeline的核绑定情况，其中core0被main函数调用，这里先不必写
thread 2 pipeline p0_0 enable
thread 4 pipeline p0_1 enable
thread 6 pipeline p1_0 enable
thread 8 pipeline p1_1 enable
```

## asm文件
bin文件由asm文件生成
`./app/asmpof xxx.asm yyy.bin`
asm文件样例
/Users/majd/Desktop/test_seasw1.0/asm/majd_5tuple_ipv6_4toutput0.asm
```
	name field_length
    ;asm文件名

;**************************************************************
;*  packet                                                    *
;**************************************************************
;定义数据包域分配规则，包结构分段
;ipv4 header
	field	ver = 1(112,4)		; version
	field	ihl = 1(116,4)		; header len
	field	tos = 1(120,8)		; type of service
	field	tot_len = 1(128,16)	; total len of packet
	field	id = 1(144,16)		; packet id
	field	frag_off = 1(160,16)	; slice info
	field	v4_ttl = 1(176,8)		; ttl
	field	v4_protocol = 1(184,8)	; type of protocol
	field	check = 1(192,16)	; checksum
	field	v4_sIP = 1(208,32)		; source IP
	field	v4_dIP = 1(240,32)		; destination IPr
	field 	delfield = 1(272,32)	; superfield to del

;ipv6 header
	field	vtc_flow = 1(112,32)		; version, traffic class, flow lable
	field	payload_len = 1(144,16)		; packet len
	field	v6_protocol = 1(160,8)			; type of service
	field	v6_ttl = 1(168,8)				; ttl
	field	v6_sIP = 1(176,128)			; source IP
	field	v6_dIP = 1(304,128)			; destination IP

;tcp
	field   sport=1(432, 16)	;TCP source port
	field   dport=1(448, 16)	;TCP dest port

	field	n_pkts = 3(0,32)
;**************************************************************
;*  Table                                                     *
;**************************************************************

table	t0, 0, mm, 8
	match   v6_protocol
	match   v6_sIP
	match   v6_dIP
	match   sport
	match   dport
	entry   entry0
endtable

table	t1, 1, mm, 8
	match   v6_protocol
	match   v6_sIP
	match   v6_dIP
	match   sport
	match   dport
	entry   entry1
endtable

table	t2, 2, mm, 8
	match   v6_protocol
	match   v6_sIP
	match   v6_dIP
	match   sport
	match   dport
	entry   entry2
endtable

table	t3, 3, mm, 8
	match   v6_protocol
	match   v6_sIP
	match   v6_dIP
	match   sport
	match   dport
	entry   entry3
endtable

;**************************************************************
;*  entry                                                     *
;**************************************************************
   
entry   entry0, 0, goto1
        priority	1
        itime      	0
	matchx          v6_protocol, 0x0000, 0x0000
	matchx          v6_sIP, 0x00000000000000000000000000000000, 0x00000000000000000000000000000000
	matchx          v6_dIP, 0x00000000000000000000000000000000, 0x00000000000000000000000000000000
	matchx          sport, 0x0000, 0x0000
	matchx          dport, 0x0000, 0x0000

endentry	

entry   entry1, 0, goto2
        priority	1
        itime      	0
	matchx          v6_protocol, 0x0000, 0x0000
	matchx          v6_sIP, 0x00000000000000000000000000000000, 0x00000000000000000000000000000000
	matchx          v6_dIP, 0x00000000000000000000000000000000, 0x00000000000000000000000000000000
	matchx          sport, 0x0000, 0x0000
	matchx          dport, 0x0000, 0x0000

endentry

entry   entry2, 0, goto3
        priority	1
        itime      	0
	matchx          v6_protocol, 0x0000, 0x0000
	matchx          v6_sIP, 0x00000000000000000000000000000000, 0x00000000000000000000000000000000
	matchx          v6_dIP, 0x00000000000000000000000000000000, 0x00000000000000000000000000000000
	matchx          sport, 0x0000, 0x0000
	matchx          dport, 0x0000, 0x0000

endentry

entry   entry3, 0, output
        priority	1
        itime      	0
	matchx          v6_protocol, 0x0000, 0x0000
	matchx          v6_sIP, 0x00000000000000000000000000000000, 0x00000000000000000000000000000000
	matchx          v6_dIP, 0x00000000000000000000000000000000, 0x00000000000000000000000000000000
	matchx          sport, 0x0000, 0x0000
	matchx          dport, 0x0000, 0x0000

endentry
;**************************************************************
;*  proc                                                      *
;**************************************************************

proc	goto1, 0
	goto	t1
endproc

proc	goto2, 1
	goto	t2
endproc

proc	goto3, 2
	goto	t3
endproc

proc	output, 3
	;add	n_pkts, 1
	;outm	4
	outp	0
	exit
endproc

start t0

```
